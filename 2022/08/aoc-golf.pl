perl -0E '$_=<>;/\n/;$W=$+[0];/\n$/;$l=$+[0];$h=$l/$W;@I=(-1,1,-$W,$W);@a=split//;for$i(0..$l-1){$a[$i]eq"\n"&&next;$d=$s=1;for(0..3){$v=1;$I=$i+$I[$_];$c=0;while(0<=$I&&$I<$l&&($I%$W)!=($W-1)){$c++;if($a[$I]>=$a[$i]){$v=0;last}$I+=$I[$_]}$s*=$c;if($v*$d){$p++;$d=0}}$P=$s if($s>$P)}say"Part 1: $p\nPart 2: $P"' ${1:-input.txt}
