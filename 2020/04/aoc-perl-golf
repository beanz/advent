#!/bin/sh
exec perl -0ne '$p1="(?=[^!]*byr:)(?=[^!]*iyr:)(?=[^!]*eyr:)(?=[^!]*hgt:)(?=[^!]*hcl:)(?=[^!]*ecl:)(?=[^!]*pid:)";s/\n\n/!/g;$_.="!";s/\n/ /g;s/($p1[^!]*)!/$1Y!/mgo;print "Part 1: ",s/Y//g,"\n";s/((?=[^!]*byr:(?:19[2-9][0-9]|200[012]))(?=[^!]*iyr:20(?:1[0-9]|20))(?=[^!]*eyr:20(?:2[0-9]|30))(?=[^!]*hgt:(?:(?:1[5-8][0-9]|19[0-3])cm|(?:59|6[0-9]|7[0-6])in))(?=[^!]*hcl:\#[0-9a-f])(?=[^!]*ecl:(?:amb|blu|brn|gry|grn|hzl|oth))(?=[^!]*pid:\d{9}\D)[^!]*)!/Y!/mgo;print "Part 2: ",~~y/Y//,"\n";'
